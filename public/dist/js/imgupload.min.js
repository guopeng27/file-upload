"use strict";var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();function _classCallCheck(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}!function(t){var e=function(){function e(t,n){_classCallCheck(this,e);this.element=t;this.setOptions(n)}_createClass(e,[{key:"setOptions",value:function e(n){this.upButton=t(n.upButton);this.prevImg=n.prevImg;this.url=n.url;this.autoUpload=false||n.autoUpload;this.dragDrop=null||t(n.dragDrop);this.filesFilter=[];this.filter=n.filter||function(){};this.prevImg=n.prevImg||function(){};this.progress=n.progress||function(){};this.compeleted=n.compeleted||function(){};this.init()}},{key:"fileAdded",value:function e(n){var r=this;n.stopPropagation();n.preventDefault();var a=n.target.files||n.originalEvent.dataTransfer.files;var o=[];t(a).each(function(t,e){r.filesFilter.push(e);var n=new FileReader;n.readAsDataURL(e);n.onload=function(t){o.push(t.target.result)}});this.prevImg(o)}},{key:"upload",value:function e(){t.ajax({xhr:function t(){var t=new window.XMLHttpRequest;t.upload.addEventListener("progress",function(t){this.progress(t)},false);return t},url:this.url,type:"POST",data:formData,processData:false,contentType:false,success:this.compeleted})}},{key:"init",value:function e(){this.element.on("change",t.proxy(this.fileAdded,this));if(this.upButton&&this.autoUpload==false){this.upButton.on("click",t.proxy(this.upload,this))}if(this.dragDrop){this.dragDrop.on("drop",t.proxy(this.fileAdded,this))}}}]);return e}();t.fn.imgupload=function(n,r){this.each(function(){var a=t(this);if(a.data("imgupload")){a.data("imgupload").remove()}a.data("imgupload",new e(a,n,r))});return this}}($);$(function(){$(document).on({dragleave:function t(e){e.preventDefault()},drop:function t(e){e.preventDefault()},dragenter:function t(e){e.preventDefault()},dragover:function t(e){e.preventDefault()}})});$("#upBtn").imgupload({upButton:"#up",url:"/upload",dragDrop:"#drop",autoUpload:false,prevImg:function t(e){console.log(e)},filter:function t(e){},progress:function t(e){if(e.lengthComputable){var n;var r=e.loaded/e.total;$("#progressBar").show();$("#progressBar .inner").animate({width:r*100+"%"},function(){if(r==1){$("#progressBar").fadeOut();clearInterval(n);$("#progressBar .num").html(r*100+"%")}});n=setInterval(function(){if(parseInt($("#progressBar .num").html())==Math.floor(r*100)){clearInterval(n)}else{$("#progressBar .num").html(parseInt($("#progressBar .num").html())+1+"%")}},60)}},compeleted:function t(e){console.log(e)}});
//# sourceMappingURL=imgupload.min.js.map
