"use strict";var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,i,a){if(i)e(t.prototype,i);if(a)e(t,a);return t}}();function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}!function(e){var t=function(){function t(e,i){_classCallCheck(this,t);this.element=e;this.setOptions(i)}_createClass(t,[{key:"setOptions",value:function t(i){this.upButton=e(i.upButton);this.url=i.url;this.autoUpload=false||i.autoUpload;this.dropArea=null||e(i.dropArea);this.filesList=[];this.maxSize=i.maxSize||2*1024*1024;this.maxLength=i.maxLength||10;this.filter=i.filter||function(e){return e};this.prevImg=i.prevImg||function(){};this.progress=i.progress||function(){};this.compeleted=i.compeleted||function(){};this.init()}},{key:"fileAdded",value:function t(i){var a=this;i.stopPropagation();i.preventDefault();this.dropArea.removeClass("active");var n=i.target.files||i.originalEvent.dataTransfer.files;var r=a.filter(n);a.filesList=a.filesList.concat(r);var s=[];e(r).each(function(e,t){var i=new FileReader;i.readAsDataURL(t);i.onload=function(t){s.push(t.target.result);if(e==r.length-1){a.prevImg(s)}}})}},{key:"upload",value:function t(){if(this.filesList.length==0){alert("请先选择需要上传的文件！");return}var i=this;var a=new FormData;e(this.filesList).each(function(e,t){a.append("file"+e,t)});e.ajax({xhr:function e(){var e=new window.XMLHttpRequest;e.upload.addEventListener("progress",function(e){i.progress(e)},false);return e},url:this.url,type:"POST",data:a,processData:false,contentType:false,success:function e(t){i.filesList.length=0;i.compeleted(t)}})}},{key:"dragEnter",value:function e(){this.dropArea.addClass("active")}},{key:"dragLeave",value:function e(){this.dropArea.removeClass("active")}},{key:"init",value:function t(){this.element.on("change",e.proxy(this.fileAdded,this));if(this.upButton&&this.autoUpload==false){this.upButton.on("click",e.proxy(this.upload,this))}if(this.dropArea){this.dropArea.on("dragenter",e.proxy(this.dragEnter,this));this.dropArea.on("dragleave",e.proxy(this.dragLeave,this));this.dropArea.on("drop",e.proxy(this.fileAdded,this))}e(document).on({dragleave:function e(t){t.preventDefault()},drop:function e(t){t.preventDefault()},dragenter:function e(t){t.preventDefault()},dragover:function e(t){t.preventDefault()}})}}]);return t}();e.fn.imgupload=function(i,a){this.each(function(){var n=e(this);if(n.data("imgupload")){n.data("imgupload").remove()}n.data("imgupload",new t(n,i,a))});return this}}($);
//# sourceMappingURL=imgupload.min.js.map
